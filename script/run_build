#!/bin/bash

set -ex
source script/functions.sh

function run_acceptance_suite {
  bin/rake acceptance --trace
}

run_specs_and_record_done
run_acceptance_suite

if documentation_enforced; then
  check_documentation_coverage
fi

if style_and_lint_enforced; then
  check_style_and_lint
fi

if is_mri; then
  run_specs_one_by_one
else
  echo "Skipping the rest of the build on non-MRI rubies"
fi
