#!/bin/bash

set -ex
source script/functions.sh

# Allow repos to override the default functions and add their own
if [ -f script/custom_build_functions.sh ]; then
  source script/custom_build_functions.sh
fi

run_specs_and_record_done
run_cukes

if documentation_enforced; then
  check_documentation_coverage
fi

if style_and_lint_enforced; then
  check_style_and_lint
fi

if is_mri; then
  run_all_spec_suites
else
  echo "Skipping the rest of the build on non-MRI rubies"
fi
